<!DOCTYPE html>
<html>
  <head>
    <title>My Profile - E-Gov</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="bg-gray-50 p-6">
    <%- include('../partials/header.ejs') %>
    <div class="max-w-2xl mx-auto mt-10">
      <h1 class="text-2xl font-bold mb-6">My Profile</h1>

      <% if (req.query.updated) { %>
      <div
        class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6"
      >
        Profile updated successfully!
      </div>
      <% } %>

      <form method="POST" action="/citizen/profile" class="space-y-4">
        <div>
          <label class="block text-sm font-medium mb-1">Full Name</label>
          <input
            type="text"
            value="<%= user.name %>"
            disabled
            class="w-full px-3 py-2 border rounded bg-gray-100"
          />
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">National ID</label>
          <input
            type="text"
            name="national_id"
            value="<%= profile.national_id || '' %>"
            class="w-full px-3 py-2 border rounded"
          />
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Date of Birth</label>
          <input
            type="date"
            name="dob"
            value="<%= profile.dob ? profile.dob.toISOString().split('T')[0] : '' %>"
            class="w-full px-3 py-2 border rounded"
          />
        </div>
        <div>
          <label class="block text-sm font-medium mb-1"
            >Contact Info (Phone/Email)</label
          >
          <input
            type="text"
            name="contact_info"
            value="<%= profile.contact_info || '' %>"
            class="w-full px-3 py-2 border rounded"
          />
        </div>
        <button
          type="submit"
          class="bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700"
        >
          Save Changes
        </button>
      </form>
    </div>
  </body>
</html>
